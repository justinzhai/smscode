

# 流程说明
1. 获取手机号
2. 获取验证码
3. 回调上传执行结果

# API

每个项目都会在我们的后台配置itemid,同时也会分配一个secret秘钥串给到用户，用于生成每个请求的sign

## 1.获取手机号

通过该接口获取可用的手机号，如果没有获取到(错误码1001)，则请重试，建议间隔时间每秒钟不超过10次

```
http://sms.meilihh.com/getmobile?itemid=1&timestamp=20190701152800&sign=AB5A65F5C63157935
```

### 请求参数
| 字段名称 | 是否必须| 说明 |
| -------- | -------- | -------- |
| timestamp |是 |时间戳	|
| sign | 是 | 校验串  MD5(itemid+timestamp+secret) |
| itemid     | 是     | 项目编号,由我方分配     |


### 返回值
```
获取成功：success|手机号码，例如：success|13888888888
```

### 错误码

|错误码|说明|
| -------- | -------- |
|1001|没有合适的手机号，请稍后重试|
|1002|校验串错误。|
|1003|没有对应的项目编号|
|1004|项目已经被停止|
|1005|访问太频繁，请间隔1秒之后再试||
|1006|余额不足|

## 2.获取SMS验证码

```
http://sms.meilihh.com/getsms?itemid=1&timestamp=20190701152800&sign=AB5A65F5C63157935&mobile=13888888888
```

### 请求参数
| 字段名称 | 是否必须| 说明 |
| -------- | -------- | -------- |
| itemid     | 是     | 项目编号,由我方分配     |
| timestamp |是 |时间戳	|
| sign | 是 | 校验串  MD5(itemid+timestamp+secret) |
| mobile| 是|需要获取短信的手机号|


### 返回值
```
获取成功：success|手机号码|短信内容，例如：success|13888888888|短信内容

短信内容为UTF-8编码，如果收到的短信是乱码，请自行转换编码。
短信尚未到达：2001，应继续调用取短信接口，直到超时为止。
```
### 错误码

|错误码|说明|
| -------- | -------- |
|2001|短信尚未到达，请重试|
|2002|校验串错误。|
|2003|没有对应的项目编号|
|2004|项目已经被停止|
|2005|访问太频繁，请间隔1秒之后再试||
|2006|短信超时未到达|
|2007|参数mobile不能为空|



## 3.回调结果通知

```
http://sms.meilihh.com/result?itemid=1&timestamp=20190701152800&sign=AB5A65F5C63157935
      &mobile=13888888888&result=success
```

### 返回值
```
记录成功：ok
记录失败：error   //请重试一次，每个mobile+itemid在同一天只会记录一次
```

### 请求参数
| 字段名称 | 是否必须| 说明 |
| -------- | -------- | -------- |
| itemid     | 是     | 项目编号,由我方分配     |
| timestamp |是 |时间戳	|
| sign | 是 | 校验串  MD5(itemid+timestamp+secret) |
| mobile| 是|返回结果的手机号|
| result |是 |返回结果 success或者failed	|

